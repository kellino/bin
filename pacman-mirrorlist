#!/usr/bin/bash

get_sudo() {
    if [ $(id -u) != 0 ]; then
        echo "This script requires root permissions"
        sudo "$0"
        exit
    fi
}

rename() {
    cd /etc/pacman.d || exit
    if [ -e mirrorlist ]; then
        mv mirrorlist mirrorlist.old
    fi
    mv mirrorlist.pacnew mirrorlist
}

choose_UK_servers() {
    sed -i '/United Kingdom/,/^$/s/#//' mirrorlist
}

get_sudo && rename && choose_UK_servers
